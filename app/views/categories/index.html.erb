<section class="categories-index-main-section">
  <section class="categories-index-sub-section">

    <nav class="categories-index-nav">
      <h1 class="categories-index-nav-heading">TRANSACTIONS</h1>
    </nav>

    <div class="all-categories-container">
      <% if @categories %>
        <% @categories.each do |category| %>
          <%= link_to category_expenses_path(category), class: 'individual-category-container' do %>
            <div class="individual-category-image-container">
              <% if category.icon %>
                <img src=<%= category.icon %> class="category-image" />
              <% end %>
            </div>

            <div class="individual-category-details-container">
              <div class="individual-category-name-and-total-amount-container">
                <p class="category-name"><%= category.name %></p>

                <% totalamount = 0 %>
                <% category.expenses.each do |expense| %>
                  <% totalamount += expense.amount %>
                <% end %>
                <p class="category-total-amount"><%= '%.2f' % totalamount %></p>
              </div>
              <p class="category-creation-date"><%= category.created_at.strftime("%d %b %Y") %></p>
            </div>
          <% end %>
        <% end %>
      <% else %>
        <p class="no-categories-message">There are no categories created yet</p>
      <% end %>
    </div>
    <div class="add-new-category-btn-container">
      <%= link_to 'ADD NEW CATEGORY', new_category_path, class: 'add-new-category-btn' %>
    </div>
  </section>
</section>